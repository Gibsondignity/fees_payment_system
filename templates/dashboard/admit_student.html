{% extends "dashboard/index.html" %}



{% load static %}

{% block content %}
<div class="content-body">
    <!-- row -->
    <div class="container-fluid">


        <div class="row page-titles mx-0">
            <div class="col-sm-6 p-md-0">
                <div class="welcome-text">
                    <h4>Admit Student</h4>
                </div>
            </div>
            <div class="col-sm-6 p-md-0 justify-content-sm-end mt-2 mt-sm-0 d-flex">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
                    <li class="breadcrumb-item active"><a href="javascript:void(0);">Adminstration</a></li>
                    <li class="breadcrumb-item active"><a href="javascript:void(0);">Admit Student</a></li>
                </ol>
            </div>
        </div>

        <div class="row">
            <div class="col-xl-12 col-xxl-12 col-lg-12 col-md-12 col-sm-12">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Student Info</h4>
                    </div>
                    <div class="card-body">


                        <form action="#" id="submit_form" class="step-form-horizontal">
                            {% csrf_token %} 
                            <div>
                                <section>
                                    <div class="row">
                                        <div class="col-lg-4 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">First Name*</label>
                                                <input type="text" name="first_name" class="form-control"
                                                    placeholder="Arnold" required="">
                                            </div>
                                        </div>
                                        <div class="col-lg-4 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Last Name*</label>
                                                <input type="text" name="last_name" class="form-control"
                                                    placeholder="Henry" required="">
                                            </div>
                                        </div>
                                        <div class="col-lg-4 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Student ID*</label>
                                                <input type="number" name="student_id" class="form-control"
                                                    placeholder="1234344" required="">
                                            </div>
                                        </div>
                                        <div class="col-lg-4 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Email Address*</label>
                                                <div class="input-group">
                                                    <input type="email" id="id_email" name="email" class="form-control" id="inputGroupPrepend2"
                                                        aria-describedby="inputGroupPrepend2"
                                                        placeholder="example@gmail.com" required="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Phone Number*</label>
                                                <div class="input-group">
                                                    <input type="text" name="phone_number" class="form-control"
                                                        placeholder="(+233)408-657-9007" required="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Date of Birth*</label>
                                                <div class="input-group">
                                                    <input type="date" name="date_of_birth" class="form-control"
                                                        placeholder="" required="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Address*</label>
                                                <input type="text" name="address" class="form-control" required="">
                                            </div>
                                        </div>
                                        <div class="col-lg-6 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Enrollment Date*</label>
                                                <input type="date" name="enrollment_date" class="form-control"
                                                    required="">
                                            </div>
                                        </div>
                                        <div class="col-lg-6 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Date of Completion*</label>
                                                <input type="date" name="completion_date" class="form-control"
                                                    required="">
                                            </div>
                                        </div>
                                        <div class="col-lg-12 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Facaulty*</label>
                                                <select name="facaulty" class="form-control" required="">
                                                    <option value="">Select Faculty</option>
                                                    {% for faculty in facauties %}
                                                    <option value="{{faculty.id}}">{{faculty.name}}</option>

                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Entry Level*</label>
                                                <select name="entry_level" class="form-control" required="">
                                                    <option value="">Select Level</option>
                                                    <option value="Level 100">Level 100</option>
                                                    <option value="Level 200">Level 200</option>
                                                    <option value="Level 300">Level 300</option>
                                                    <option value="Level 400">Level 400</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Current Level*</label>
                                                <select name="current_level" class="form-control" required="">
                                                    <option value="">Select Level</option>
                                                    <option value="Level 100">Level 100</option>
                                                    <option value="Level 200">Level 200</option>
                                                    <option value="Level 300">Level 300</option>
                                                    <option value="Level 400">Level 400</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Nationality*</label>
                                                <select name="nationality" class="form-control" required="">
                                                    <option value="">Select Level</option>
                                                    <option value="Ghanaian">Ghanaian</option>
                                                    <option value="International Student">International Student</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Student Category*</label>
                                                <select name="student_category" class="form-control" required="">
                                                    <option value="">Select Category</option>
                                                    <option value="Freshmen">Freshmen</option>
                                                    <option value="Top-up">Top-up</option>
                                                    <option value="Continuing">Continuing</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </section>

                                <br><br>
                                <section>
                                    <h4>Fees Section</h4>
                                    <div class="row">


                                        <div class="col-lg-4 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Tuition Amount*</label>
                                                <input type="number" name="tuition_amount" class="form-control"
                                                    placeholder="5000" required="">
                                            </div>
                                        </div>

                                        <div class="col-lg-4 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Other Charges*</label>
                                                <input type="number" name="other_charges" class="form-control"
                                                    placeholder="450" required="">
                                            </div>
                                        </div>


                                        <div class="col-lg-12 mb-4">
                                            <div class="form-group">
                                                <label class="text-label">Academic Year*</label>
                                                <select name="academic_year" class="form-control" required="">
                                                    <option value="">Select academic_year</option>
                                                    {% for academic_year in academic_years %}
                                                    <option value="{{academic_year.id}}">{{academic_year.year}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>


                                    </div>
                                </section>
                            </div>
                            <div class="text-left mt-4 mb-5">
                                <button class="btn btn-primary btn-sl-sm mr-3" type="submit"><span class="mr-2"><i
                                            class="fa fa-paper-plane"></i></span> Send</button>
                                <button class="btn btn-dark btn-sl-sm" type="button"><span class="mr-2"><i
                                            class="fa fa-times" aria-hidden="true"></i></span> Discard</button>
                            </div>
                        </form>


                    </div>
                </div>
            </div>
        </div>

    </div>
</div>


{% endblock content %}



{% block script %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $('#submit_form').submit(function (event) {
            event.preventDefault();

            var formData = new FormData(this);

            email = $('#id_email').val()

            if (!isValidEmail(email)) {
                alert('Please enter a valid email address.');
                return;
            }

            $.ajax({
                url: "{% url 'admit_student' %}", // Set the correct URL here
                type: 'POST',
                data: formData,
                contentType: false,
                processData: false,
                success: function (data) {
                    alert('Success')
                    $('#submit_form')[0].reset();
                },
                error: function (xhr, status, error) {
                    var response = JSON.parse(xhr.responseText);
                    alert("Error: " + response['error']);
                }
            });
        });

        function isValidEmail(email) {
            var re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        }
    });
</script>

{% endblock script %}